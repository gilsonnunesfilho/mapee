<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html"><link rel="import" href="vaadin-grid-scroller.html"><link rel="import" href="vaadin-grid-dynamic-columns-mixin.html"><link rel="import" href="vaadin-grid-data-provider-mixin.html"><link rel="import" href="vaadin-grid-array-data-provider-mixin.html"><link rel="import" href="vaadin-grid-cell-click-mixin.html"><link rel="import" href="vaadin-grid-active-item-mixin.html"><link rel="import" href="vaadin-grid-scroll-mixin.html"><link rel="import" href="vaadin-grid-selection-mixin.html"><link rel="import" href="vaadin-grid-sort-mixin.html"><link rel="import" href="vaadin-grid-row-details-mixin.html"><link rel="import" href="vaadin-grid-keyboard-navigation-mixin.html"><link rel="import" href="vaadin-grid-a11y-mixin.html"><link rel="import" href="vaadin-grid-filter-mixin.html"><link rel="import" href="vaadin-grid-column-reordering-mixin.html"><link rel="import" href="vaadin-grid-column-resizing-mixin.html"><link rel="import" href="vaadin-grid-column.html"><link rel="import" href="vaadin-grid-outer-scroller.html"><link rel="import" href="vaadin-grid-styles.html"></head><body><dom-module id="vaadin-grid"><template><style include="vaadin-grid-styles"></style><div id="scroller" no-scrollbars$="[[!_scrollbarWidth]]" wheel-scrolling$="[[_wheelScrolling]]" safari$="[[_safari]]" ios$="[[_ios]]" loading$="[[loading]]" edge$="[[_edge]]" firefox$="[[_firefox]]" ie$="[[_ie]]" column-reordering-allowed$="[[columnReorderingAllowed]]"><table id="table" role="grid" aria-multiselectable="true" tabindex="0"><caption id="fixedsizer" class="sizer" part="row"></caption><thead id="header" role="rowgroup"></thead><tbody id="items" role="rowgroup"></tbody><tfoot id="footer" role="rowgroup"></tfoot></table><div part="reorder-ghost"></div><vaadin-grid-outer-scroller id="outerscroller" scroll-target="[[scrollTarget]]" scroll-handler="[[_this]]" no-scrollbars="[[!_scrollbarWidth]]"><div id="outersizer" class="sizer" part="row"></div></vaadin-grid-outer-scroller></div><slot name="nodistribute"></slot><div id="focusexit" tabindex="0"></div></template></dom-module><script>{class GridElement extends Vaadin.ThemableMixin(Vaadin.Grid.DataProviderMixin(Vaadin.Grid.ArrayDataProviderMixin(Vaadin.Grid.DynamicColumnsMixin(Vaadin.Grid.CellClickMixin(Vaadin.Grid.ActiveItemMixin(Vaadin.Grid.ScrollMixin(Vaadin.Grid.SelectionMixin(Vaadin.Grid.SortMixin(Vaadin.Grid.RowDetailsMixin(Vaadin.Grid.KeyboardNavigationMixin(Vaadin.Grid.A11yMixin(Vaadin.Grid.FilterMixin(Vaadin.Grid.ColumnReorderingMixin(Vaadin.Grid.ColumnResizingMixin(Vaadin.Grid.ScrollerElement))))))))))))))){static get is(){return"vaadin-grid"}static get version(){return"4.1.5"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_this:{type:Object,value:function(){return this}},_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},_edge:{type:Boolean,value:"undefined"!==typeof CSS&&CSS.supports("(-ms-ime-align:auto)")},_ie:{type:Boolean,value:!!(navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/))},_firefox:{type:Boolean,value:-1<navigator.userAgent.toLowerCase().indexOf("firefox")},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)}}}constructor(){super();this.addEventListener("animationend",this._onAnimationEnd)}_createScrollerRows(count){const rows=[];for(var i=0;i<count;i++){const row=document.createElement("tr");row.setAttribute("part","row");row.setAttribute("role","row");if(this._columnTree){this._updateRow(row,this._columnTree[this._columnTree.length-1],"body",!1,!0)}rows.push(row)}if(this._columnTree){this._columnTree[this._columnTree.length-1].forEach(c=>c.notifyPath("_cells.*",c._cells))}Polymer.RenderStatus.beforeNextRender(this,()=>{this._updateLastColumn();this._resetKeyboardNavigation()});return rows}_getRowTarget(){return this.$.items}_createCell(tagName){const contentId=this._contentIndex=this._contentIndex+1||0,slotName="vaadin-grid-cell-content-"+contentId,cellContent=document.createElement("vaadin-grid-cell-content");cellContent.setAttribute("slot",slotName);const cell=document.createElement(tagName);cell.id=slotName.replace("-content-","-");cell.setAttribute("tabindex","-1");cell.setAttribute("role","td"===tagName?"gridcell":"columnheader");const slot=document.createElement("slot");slot.setAttribute("name",slotName);cell.appendChild(slot);cell._content=cellContent;cellContent.addEventListener("mousedown",()=>{if(window.chrome){const mouseUpListener=()=>{if(!cellContent.contains(this.getRootNode().activeElement)){cell.focus()}document.removeEventListener("mouseup",mouseUpListener,!0)};document.addEventListener("mouseup",mouseUpListener,!0)}else{setTimeout(()=>{if(!cellContent.contains(this.getRootNode().activeElement)){cell.focus()}})}});return cell}_updateRow(row,columns,section,isColumnRow,noNotify){section=section||"body";const contentsFragment=document.createDocumentFragment();Array.from(row.children).forEach(cell=>cell._vacant=!0);row.innerHTML="";if("outersizer"!==row.id&&"fixedsizer"!==row.id){row.hidden=!0}columns.forEach((column,index)=>{let cell;if("body"===section){column._cells=column._cells||[];cell=column._cells.filter(cell=>cell._vacant)[0];if(!cell){cell=this._createCell("td");column._cells.push(cell)}cell.setAttribute("part","cell body-cell");row.appendChild(cell);if(index===columns.length-1&&this._rowDetailsTemplate){this._detailsCells=this._detailsCells||[];const detailsCell=this._detailsCells.filter(cell=>cell._vacant)[0]||this._createCell("td");if(-1===this._detailsCells.indexOf(detailsCell)){this._detailsCells.push(detailsCell)}if(!detailsCell._content.parentElement){contentsFragment.appendChild(detailsCell._content)}this._configureDetailsCell(detailsCell);row.appendChild(detailsCell);this._a11ySetRowDetailsCell(row,detailsCell);detailsCell._vacant=!1}if(column.notifyPath&&!noNotify){column.notifyPath("_cells.*",column._cells)}}else{const tagName="header"===section?"th":"td";if(isColumnRow||"vaadin-grid-column-group"===column.localName){cell=column[`_${section}Cell`]||this._createCell(tagName);row.appendChild(cell);if(cell._instance){row.hidden=!1}column[`_${section}Cell`]=cell}else{column._emptyCells=column._emptyCells||[];cell=column._emptyCells.filter(cell=>cell._vacant)[0]||this._createCell(tagName);row.appendChild(cell);if(-1===column._emptyCells.indexOf(cell)){column._emptyCells.push(cell)}}cell.setAttribute("part",`cell ${section}-cell`)}if(!cell._content.parentElement){contentsFragment.appendChild(cell._content)}cell._vacant=!1;cell._column=column});this.appendChild(contentsFragment);this._frozenCellsChanged();this._updateLastColumn()}_updateScrollerItem(row,index){this._preventScrollerRotatingCellFocus(row,index);if(!this._columnTree){return}Array.from(row.children).forEach(cell=>{if(cell._instance){cell._instance.index=index}});this._toggleAttribute("odd",index%2,row);this._a11yUpdateRowRowindex(row,index);this._getItem(index,row)}_columnTreeChanged(columnTree){Array.from(this.$.items.children).forEach(row=>this._updateRow(row,columnTree[columnTree.length-1]));while(this.$.header.children.length<columnTree.length){const headerRow=document.createElement("tr");headerRow.setAttribute("part","row");headerRow.setAttribute("role","row");this.$.header.appendChild(headerRow);const footerRow=document.createElement("tr");footerRow.setAttribute("part","row");footerRow.setAttribute("role","row");this.$.footer.appendChild(footerRow)}while(this.$.header.children.length>columnTree.length){this.$.header.removeChild(this.$.header.firstElementChild);this.$.footer.removeChild(this.$.footer.firstElementChild)}Array.from(this.$.header.children).forEach((headerRow,index)=>this._updateRow(headerRow,columnTree[index],"header",index===columnTree.length-1));Array.from(this.$.footer.children).forEach((footerRow,index)=>this._updateRow(footerRow,columnTree[columnTree.length-1-index],"footer",0===index));this._updateRow(this.$.outersizer,columnTree[columnTree.length-1]);this._updateRow(this.$.fixedsizer,columnTree[columnTree.length-1]);this._resizeHandler();this._frozenCellsChanged();this._updateLastColumn();this._resetKeyboardNavigation();this._a11yUpdateHeaderRows();this._a11yUpdateFooterRows()}_updateItem(row,item){row._item=item;Array.from(row.children).forEach(cell=>{if(cell._instance){if(this._itemsEqual(cell._instance.item,item)){cell._instance._setPendingProperty("item",{},!1)}cell._instance.item=item;cell._instance.index=row.index}});this._toggleRowSelected(row,this._isSelected(item));this._toggleRowDetailsOpened(row,this._rowDetailsTemplate&&this._isDetailsOpened(item));this._toggleRowExpanded(row,this._isExpanded(item));this._updateRowLevel(row,this._getIndexLevel(row.index));if(this._rowDetailsTemplate){this._toggleDetailsCell(row,item)}this._debouncerUpdateHeights=Polymer.Debouncer.debounce(this._debouncerUpdateHeights,Polymer.Async.timeOut.after(1),()=>{this._updateMetrics();this._positionItems();this._updateScrollerSize()})}_toggleRowDetailsOpened(row,detailsOpened){Array.from(row.children).forEach(cell=>{if(cell._instance){cell._instance.__detailsOpened__=detailsOpened;cell._instance.detailsOpened=detailsOpened}});this._a11yUpdateRowDetailsOpened(row,detailsOpened)}_toggleRowSelected(row,selected){Array.from(row.children).forEach(cell=>{if(cell._instance){cell._instance.__selected__=selected;cell._instance.selected=selected}});this._toggleAttribute("selected",selected,row);this._a11yUpdateRowSelected(row,selected)}_updateRowLevel(row,level){Array.from(row.children).forEach(cell=>{if(cell._instance){cell._instance.__level__=level;cell._instance.level=level}});this._a11yUpdateRowLevel(row,level)}_toggleRowExpanded(row,expanded){Array.from(row.children).forEach(cell=>{if(cell._instance){cell._instance.__expanded__=expanded;cell._instance.expanded=expanded}});this._toggleAttribute("expanded",expanded,row)}_resizeHandler(){this._updateDetailsCellHeights();this._accessIronListAPI(super._resizeHandler,!0);this._updateHeaderFooterMetrics()}_updateHeaderFooterMetrics(){const headerHeight=this.$.header.clientHeight+"px",footerHeight=this.$.footer.clientHeight+"px";[this.$.outersizer,this.$.fixedsizer,this.$.items].forEach(element=>{element.style.borderTopWidth=headerHeight;element.style.borderBottomWidth=footerHeight});Polymer.RenderStatus.afterNextRender(this.$.header,()=>{if(this._pendingScrollToIndex){this._scrollToIndex(this._pendingScrollToIndex)}})}_onAnimationEnd(e){if("vaadin-grid-appear"===e.animationName){this._render();this._updateHeaderFooterMetrics();e.stopPropagation()}}_toggleAttribute(name,bool,node){if(bool){node.setAttribute(name,"")}else{node.removeAttribute(name)}}ready(){super.ready();if(null===document.doctype){console.warn("<vaadin-grid> requires the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.")}}}customElements.define(GridElement.is,GridElement);window.Vaadin=window.Vaadin||{};Vaadin.GridElement=GridElement}</script></body></html>