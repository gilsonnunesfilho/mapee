<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../paper-card/paper-card.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../paper-button/paper-button.html"><link rel="import" href="../paper-item/paper-item.html"><link rel="import" href="../paper-checkbox/paper-checkbox.html"><link rel="import" href="../iron-icon/iron-icon.html"><link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="import" href="../iron-collapse/iron-collapse.html"><link rel="import" href="../iron-form/iron-form.html"><link rel="import" href="../paper-progress/paper-progress.html"><link rel="import" href="fluido-paper-login-icons.html"></head><body><dom-module id="fluido-paper-login"><template><style include="paper-input-container">:host{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 19em);}paper-card{width:100%;}paper-progress{width:100%;--paper-progress-container-color:transparent;--paper-progress-active-color:var(--primary-color, #3f51b5);}header h2{@apply --paper-font-headline;text-align:center;}header ::slotted(*){@apply --paper-font-caption;color:var(--secondary-text-color);}iron-icon{color:var(--secondary-text-color, #737373);}paper-input[focused] iron-icon{color:var(--primary-color, #3f51b5);}paper-checkbox{margin:22px 0;--paper-checkbox-unchecked-color:var(--secondary-text-color, #737373);}paper-button{@apply --paper-font-button;}paper-button[raised]{background-color:var(--primary-color, #3f51b5);color:white;margin:1em 0;width:100%;}paper-item{@apply --paper-font-button;color:var(--primary-text-color, #212121);}.paper-font-caption{}.paper-font-caption.warning{}.paper-font-caption.error{}</style><paper-card style="max-width:24em;"><paper-progress indeterminate="[[_waiting]]"></paper-progress><div class="card-content"><iron-form id="form" on-iron-form-presubmit="_action"><form><slot name="branding"></slot><header><h2 class="paper-font-headline primary-text-color">[[labels.title]]</h2><slot name="subhead"></slot></header><template is="dom-if" if="[[_isMsg]]"><span class$="paper-font-caption [[_msgColor]]-color">[[_msgContent]]</span></template><paper-input required="" autofocus="" name="email" autocomplete="email" autosave="" type="email" label="[[labels.email]]" value="{{_content.email}}"><iron-icon icon="fluido-paper-login-icons:mail" slot="suffix"></iron-icon></paper-input><iron-collapse opened="[[_isState(_state, 'login', 'register')]]"><paper-input type="password" label="[[labels.password]]" value="{{_content.password}}"><iron-icon icon="fluido-paper-login-icons:lock" slot="suffix"></iron-icon></paper-input></iron-collapse><iron-collapse opened="[[_isState(_state, 'register')]]"><paper-input label="[[labels.cpassword]]" type="password" value="{{_content.cpassword}}" disabled="[[_passConfirm]]"><iron-icon icon="fluido-paper-login-icons:lock-outline" slot="suffix"></iron-icon></paper-input></iron-collapse><iron-collapse opened="[[_isState(_state, 'login')]]"><paper-checkbox checked="{{_content.remember}}">[[labels.remember]]</paper-checkbox></iron-collapse><iron-collapse opened="[[extraLogin]]"><slot name="extra-login"></slot></iron-collapse><iron-collapse opened="[[extraRegister]]"><slot name="extra-register"></slot></iron-collapse><iron-collapse opened="[[extraForget]]"><slot name="extra-login"></slot></iron-collapse></form></iron-form></div><div class="card-actions"><paper-button raised="" on-click="_submit">[[labels.enter]]</paper-button><paper-item on-click="_toogleLoginRegisterState">[[labels.change]]</paper-item><iron-collapse opened="[[_isState(_state, 'login')]]"><paper-item on-click="_forgetState">[[labels.forget]]</paper-item></iron-collapse></div><iron-a11y-keys keys="enter" on-keys-pressed="_submit"></iron-a11y-keys></paper-card></template><script>class FluidoPaperLogin extends Polymer.Element{static get is(){return"fluido-paper-login"}static get properties(){return{template:{type:Object,value(){return{login:{title:"Login",email:"E-mail",password:"Password",remember:"Remember-me",enter:"Login",change:"New account",forget:"I forget my password"},register:{title:"Register",email:"E-mail",password:"Password",cpassword:"Confirm password",enter:"Register",change:"I have a account"},forget:{title:"Forget",email:"E-mail",enter:"Remember",change:"I have a account"}}}},labels:{type:Object},extraLogin:{type:Boolean,value:!1},extraRegister:{type:Boolean,value:!1},extraForget:{type:Boolean,value:!1},_state:{type:String,value:"login",observer:"_stateChange"},_waiting:{type:Boolean,value:!1},_content:{type:Object,value(){return{remember:!0}}},_isMsg:{type:Boolean,value:!0},_msgColor:{type:String,value:"warning"},_msgContent:String,_passConfirm:{type:Boolean,value:!0}}}static get observers(){return["_handleTemplateChange(template, _state)","_computePassEmpty(_content.password)"]}_handleTemplateChange(template,state){this._isMsg=!1;this.labels=template[state]}_computePassEmpty(password){if(!password){this._passConfirm=!0}else{this._passConfirm=!1}}_isState(state){for(let i=1;i<arguments.length;i++){if(arguments[i]==state)return!0}return!1}_toogleLoginRegisterState(){this._state="login"==this._state?"register":"login"}_forgetState(){this._state="forget"}_stateChange(state){this.extraLogin="login"===state;this.extraRegister="register"===state;this.extraForget="forget"===state}_submit(){this.$.form.submit()}_action(e){e.preventDefault();let res={};switch(this._state){case"register":res.cpassword=this._content.cpassword;case"login":res.password=this._content.password;res.remember=this._content.remember;case"forget":res.email=this._content.email;}res.state=this._state;let ev={detail:{finish:this.finish.bind(this),content:res}};this._waiting=!0;this.dispatchEvent(new CustomEvent(`response-${this._state}`,ev))}sendError(eMsg){this._isMsg=!0;this._msgColor="error";this._msgContent=eMsg}sendWarning(eMsg){this._isMsg=!0;this._msgColor="warning";this._msgContent=eMsg}finish(){this._waiting=!1}}window.customElements.define(FluidoPaperLogin.is,FluidoPaperLogin);</script></dom-module></body></html>